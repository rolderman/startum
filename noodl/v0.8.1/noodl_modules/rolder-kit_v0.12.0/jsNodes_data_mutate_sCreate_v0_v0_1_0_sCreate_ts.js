(self.webpackChunkrolder_kit=self.webpackChunkrolder_kit||[]).push([["jsNodes_data_mutate_sCreate_v0_v0_1_0_sCreate_ts"],{588177:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return n}});var a=r("786552"),u=r("655245"),s=r("735744"),l=r("421558"),n={create:e=>{let{createScheme:t}=e._inputValues;(0,s.sendOutput)({noodlNode:e,portName:"creating",value:!0});let r=(0,a.default)(t.map(e=>e.order)).sort(),n=e=>(0,u.default)(e.dbClass,e.body),d=e=>(0,l.default)(e.body,{refresh:"wait_for"}),c=r.map(e=>t.filter(t=>t.order===e));(async function t(){let t={};for(let e of c){let r=await Promise.all(e.map(e=>{let r=e.references;return(r&&r.forEach(r=>e.body[r]={...e.body[r],id:t[r]?.id}),"user"===e.dbClass)?d(e):n(e)}));e.forEach((e,a)=>t[e.dbClass]=r[a])}(0,s.sendOutput)({noodlNode:e,portName:"createdData",value:t}),(0,s.sendSignal)({noodlNode:e,portName:"created"}),(0,s.sendOutput)({noodlNode:e,portName:"creating",value:!1})})().catch(e=>console.error(e))}}},655245:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return c}});var a=r("145067"),u=r("516244"),s=r("995929"),l=r("274561"),n=r("990932");let d=async(e,t,r)=>{let{Kuzzle:d,Noodl:c}=window,o=(0,n.default)(e,r),i=(0,a.dbClassVersion)(e);return(0,u.default)(`${i} create`,"time"),(0,u.default)([`${i} props: `,{dbClass:e,body:t,options:r}]),d.connect().then(()=>d.document.create((0,a.dbVersion)(),i,t,null,o).then(t=>{!c.Objects[e].subscribe&&l.default.invalidate(e);let r=(0,a.convertKuzzleResponse)(t);return(0,u.default)([`${i} created: `,r]),(0,u.default)(`${i} create`,"timeEnd"),r}).catch(e=>(0,s.default)({title:"Системная ошибка!",message:"Kuzzle create "+i+": "+e.message})))};var c=d},421558:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return n}});var a=r("516244"),u=r("995929"),s=r("145067");let l=async(e,t)=>{let r=window.Kuzzle;return(0,a.default)("CreateUser","time"),(0,a.default)(["Props: ",{body:e,options:t}]),r.connect().then(()=>r.security.createUser(null,e,t).then(e=>{let t=(0,s.convertKuzzleResponse)(e);return(0,a.default)(["CreateUser: ",t]),(0,a.default)("CreateUser","timeEnd"),t}).catch(e=>(0,u.default)({title:"Системная ошибка!",message:"Kuzzle createUser : "+e.message})))};var n=l}}]);
//# sourceMappingURL=jsNodes_data_mutate_sCreate_v0_v0_1_0_sCreate_ts.js.map