(self.webpackChunkrolder_kit=self.webpackChunkrolder_kit||[]).push([["jsNodes_data_mutate_mUpdate_v0_1_0_mUpdate_ts"],{731408:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return a}});var n=s("1383");async function a(e){e.setOutputs({updating:!0}),(0,n.default)(e.inputs.updateItems).then(t=>{e.setOutputs({updating:!1,updatedItems:t}),e.sendSignalOnOutput("updated")})}},1383:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return u}});var n=s("145067"),a=s("995929"),d=s("751616");let r=async({dbClass:e,items:t})=>{let s=window.Kuzzle,{debug:r,dbClasses:u}=window.Rolder,o=(0,n.dbVersion)(),i=(0,n.dbClassVersion)(e);return r>0&&console.time(i+" mUpdate time"),r>1&&console.log(i+" props:",{dbClass:e,items:t}),t.forEach(e=>{e._id=e.id,delete e.id}),s.connect().then(()=>s.document.mUpdate(o,i,t,{refresh:"wait_for",retryOnConflict:3}).then(t=>{!u[e].subscribe&&d.default.invalidate({dbClass:e});let s=t.successes.map(e=>(0,n.convertKuzzleResponse)(e));return t.errors.length>0&&(0,a.default)({title:"Системная ошибка!",message:"Kuzzle mUpdate errors at class "+i+": "+JSON.stringify(t.errors)}),r>1&&console.log(i+" mUpdated:",s),r>0&&console.timeEnd(i+" mUpdate time"),s}).catch(e=>(0,a.default)({title:"Системная ошибка!",message:"Kuzzle mUpdate "+i+": "+e.message})))};var u=r}}]);
//# sourceMappingURL=jsNodes_data_mutate_mUpdate_v0_1_0_mUpdate_ts.js.map