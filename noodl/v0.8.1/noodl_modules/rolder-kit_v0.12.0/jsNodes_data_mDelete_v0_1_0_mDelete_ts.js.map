{"version":3,"file":"jsNodes_data_mDelete_v0_1_0_mDelete_ts.js","sources":["./jsNodes/data/mDelete/v0.1.0/mDelete.ts","./libs/kuzzle/v.0.1.0/mDelete.ts"],"sourcesContent":["import mDelete from \"../../../../libs/kuzzle/v.0.1.0/mDelete\"\n\nexport default async function node(noodleNode: any) {\n    noodleNode.setOutputs({ deleting: true })\n    mDelete(noodleNode.inputs.deleteItems)\n        .then(() => {\n            noodleNode.setOutputs({ deleting: false })\n            noodleNode.sendSignalOnOutput('deleted')\n        })\n}","import ErrorHandler from '../../errorHandler/v0.1.0/ErrorHandler'\nimport { dbVersion, dbClassVersion } from '../../../utils/data/v0.2.0/data'\nimport useData from '../../useData/v0.2.0/useData'\n\nconst mDelete = async ({ dbClass, itemsIds }: { dbClass: string, itemsIds: string[] }) => {\n    const Kuzzle = window.Kuzzle\n    const { debug, dbClasses } = window.Rolder\n    const index = dbVersion()\n    const dbClassV = dbClassVersion(dbClass)\n\n    if (debug > 0) console.time(dbClassV + ' mDelete time')\n    if (debug > 1) console.log(dbClassV + ' props:', { dbClass, itemsIds })\n\n    return Kuzzle.connect().then(() =>\n        Kuzzle.document.mDelete(index, dbClassV, itemsIds, { refresh: 'wait_for' })\n            .then((response: any) => {\n                if (!dbClasses[dbClass].subscribe) useData.invalidate({ dbClass })\n\n                if (debug > 1) console.log(dbClassV + ' mDelete:', response)\n                if (debug > 0) console.timeEnd(dbClassV + ' mDelete time')\n                return\n            })\n            .catch((error: any) => ErrorHandler({ title: 'Системная ошибка!', message: 'Kuzzle mDelete ' + dbClassV + ': ' + error.message }))\n    )\n}\n\nexport default mDelete"],"names":["node","noodleNode","setOutputs","deleting","inputs","deleteItems","then","sendSignalOnOutput","mDelete","dbClass","itemsIds","Kuzzle","window","debug","dbClasses","Rolder","index","dbVersion","dbClassV","dbClassVersion","console","time","log","connect","document","refresh","response","subscribe","timeEnd","catch","error","title","message"],"mappings":"mNAEe,eAAeA,EAAKC,CAAe,EAC9CA,EAAWC,UAAU,CAAC,CAAEC,SAAU,EAAK,GACvC,cAAQF,EAAWG,MAAM,CAACC,WAAW,EAChCC,IAAI,CAAC,KACFL,EAAWC,UAAU,CAAC,CAAEC,SAAU,EAAM,GACxCF,EAAWM,kBAAkB,CAAC,UAClC,EACR,C,iICLA,IAAMC,EAAU,MAAO,CAAEC,QAAAA,CAAO,CAAEC,SAAAA,CAAQ,CAA2C,IACjF,IAAMC,EAASC,OAAOD,MAAM,CACtB,CAAEE,MAAAA,CAAK,CAAEC,UAAAA,CAAS,CAAE,CAAGF,OAAOG,MAAM,CACpCC,EAAQ,KAAAC,SAAA,IACRC,EAAW,KAAAC,cAAA,EAAeV,GAKhC,OAHII,EAAQ,GAAGO,QAAQC,IAAI,CAACH,EAAW,iBACnCL,EAAQ,GAAGO,QAAQE,GAAG,CAACJ,EAAW,UAAW,CAAET,QAAAA,EAASC,SAAAA,CAAS,GAE9DC,EAAOY,OAAO,GAAGjB,IAAI,CAAC,IACzBK,EAAOa,QAAQ,CAAChB,OAAO,CAACQ,EAAOE,EAAUR,EAAU,CAAEe,QAAS,UAAW,GACpEnB,IAAI,CAAC,AAACoB,IACC,CAACZ,CAAS,CAACL,EAAQ,CAACkB,SAAS,EAAE,oBAAkB,CAAC,CAAElB,QAAAA,CAAQ,GAE5DI,EAAQ,GAAGO,QAAQE,GAAG,CAACJ,EAAW,YAAaQ,GAC/Cb,EAAQ,GAAGO,QAAQQ,OAAO,CAACV,EAAW,gBAE9C,GACCW,KAAK,CAAC,AAACC,GAAe,cAAa,CAAEC,MAAO,oBAAqBC,QAAS,kBAAoBd,EAAW,KAAOY,EAAME,OAAO,AAAC,IAE3I,EAEA,MAAexB,C"}