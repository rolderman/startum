(self.webpackChunkrolder_kit=self.webpackChunkrolder_kit||[]).push([["jsNodes_data_mutate_sUpdate_v0_v0_1_0_sUpdate_ts"],{971889:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return r}});var u=a("735744"),d=a("824645"),s=a("984908"),r={update:e=>{let{updateScheme:t}=e._inputValues;(0,u.sendOutput)({noodlNode:e,portName:"updating",value:!0});let a=e=>(0,d.default)(e.dbClass,e.id,e.body),r=e=>(0,s.default)(e.id,e.body,{refresh:"wait_for"});(async function d(){let d={};d=await Promise.all(t.map(e=>{let t=e.references;return(t&&t.forEach(t=>e.body[t]={...e.body[t],id:d[t]?.id}),"user"===e.dbClass)?r(e):a(e)})),t.forEach((e,a)=>d[e.dbClass]=t[a]),(0,u.sendOutput)({noodlNode:e,portName:"updatedData",value:d}),(0,u.sendSignal)({noodlNode:e,portName:"updated"}),(0,u.sendOutput)({noodlNode:e,portName:"updating",value:!1})})().catch(e=>console.error(e))}}},824645:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return i}});var u=a("145067"),d=a("516244"),s=a("995929"),r=a("274561"),n=a("990932");let l=async(e,t,a,l)=>{let{Kuzzle:i,Noodl:c}=window,o=(0,n.default)(e,l),p=(0,u.dbClassVersion)(e);return(0,d.default)(`${p} update`,"time"),(0,d.default)([`${p} props: `,{dbClass:e,id:t,body:a,options:l}]),i.connect().then(()=>i.document.update((0,u.dbVersion)(),p,t,a,o).then(t=>{!c.Objects[e].subscribe&&r.default.invalidate(e);let a=(0,u.convertKuzzleResponse)(t);return(0,d.default)([`${p} updated: `,a]),(0,d.default)(`${p} update`,"timeEnd"),a}).catch(e=>(0,s.default)({title:"Системная ошибка!",message:"Kuzzle update "+p+": "+e.message})))};var i=l},984908:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return r}});var u=a("516244"),d=a("995929");let s=async(e,t,a)=>{let s=window.Kuzzle;return(0,u.default)("UpdateUser","time"),(0,u.default)(["Props: ",{id:e,body:t,options:a}]),s.connect().then(()=>s.security.updateCredentials("local",e,t.credentials.local).then(()=>s.security.updateUser(e,t,a)).catch(e=>(0,d.default)({title:"Системная ошибка!",message:"Kuzzle updateUser : "+e.message})))};var r=s}}]);
//# sourceMappingURL=jsNodes_data_mutate_sUpdate_v0_v0_1_0_sUpdate_ts.js.map