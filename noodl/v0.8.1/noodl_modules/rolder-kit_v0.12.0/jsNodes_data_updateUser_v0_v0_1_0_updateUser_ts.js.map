{"version":3,"file":"jsNodes_data_updateUser_v0_v0_1_0_updateUser_ts.js","sources":["./jsNodes/data/updateUser/v0/v0.1.0/updateUser.ts","./libs/kuzzle/updateUser/v0.1.0/updateUser.ts"],"sourcesContent":["import { sendOutput, sendSignal } from \"../../../../../utils/noodl/v0.1.0/send\"\nimport updateUser from \"../../../../../libs/kuzzle/updateUser/v0.1.0/updateUser\"\n\ntype UserItem = {\n    id: string\n    body: any\n    options?: any\n}\n\nconst signals = {\n    updateUser: (noodlNode: NodeInstance) => {\n        const { userItem }: { userItem: UserItem } = noodlNode._inputValues\n        sendOutput({ noodlNode, portName: 'updating', value: true })\n        updateUser({ id: userItem.id, body: userItem.body, options: { refresh: 'wait_for' } })\n\n        sendSignal({ noodlNode, portName: 'updated' })\n        sendOutput({ noodlNode, portName: 'updating', value: false })\n    }\n}\n\nexport default signals","import conLog from '../../../../utils/debug/conLog/v0.1.0/conLog'\nimport ErrorHandler from '../../../errorHandler/v0.1.0/ErrorHandler'\n\nconst updateUser = async (id: string, body: any, options?: Options) => {\n    const Kuzzle = window.Kuzzle\n\n    conLog(`UpdateUser`, 'time')\n    conLog([`Props: `, { id, body, options }])\n\n    return Kuzzle.connect().then(() =>\n        Kuzzle.security.updateCredentials('local', id, body.credentials.local)\n            .then(() => Kuzzle.security.updateUser(id, body, options))\n            .catch((error: any) => ErrorHandler({ title: 'Системная ошибка!', message: 'Kuzzle updateUser ' + ': ' + error.message }))\n    )\n}\n\nexport default updateUser"],"names":["updateUser","noodlNode","userItem","_inputValues","sendOutput","portName","value","id","body","options","refresh","sendSignal","Kuzzle","window","connect","then","security","updateCredentials","credentials","local","catch","error","title","message"],"mappings":"0OAoBA,EAXgB,CACZA,WAAY,AAACC,IACT,GAAM,CAAEC,SAAAA,CAAQ,CAAE,CAA2BD,EAAUE,YAAY,CACnE,KAAAC,UAAA,EAAW,CAAEH,UAAAA,EAAWI,SAAU,WAAYC,MAAO,EAAK,GAC1D,cAAW,CAAEC,GAAIL,EAASK,EAAE,CAAEC,KAAMN,EAASM,IAAI,CAAEC,QAAS,CAAEC,QAAS,UAAW,CAAE,GAEpF,KAAAC,UAAA,EAAW,CAAEV,UAAAA,EAAWI,SAAU,SAAU,GAC5C,KAAAD,UAAA,EAAW,CAAEH,UAAAA,EAAWI,SAAU,WAAYC,MAAO,EAAM,EAC/D,CACJ,C,mHCfA,IAAMN,EAAa,MAAOO,EAAYC,EAAWC,KAC7C,IAAMG,EAASC,OAAOD,MAAM,CAK5B,MAHA,cAAO,aAAc,QACrB,cAAO,CAAC,UAAW,CAAEL,GAAAA,EAAIC,KAAAA,EAAMC,QAAAA,CAAQ,EAAE,EAElCG,EAAOE,OAAO,GAAGC,IAAI,CAAC,IACzBH,EAAOI,QAAQ,CAACC,iBAAiB,CAAC,QAASV,EAAIC,EAAKU,WAAW,CAACC,KAAK,EAChEJ,IAAI,CAAC,IAAMH,EAAOI,QAAQ,CAAChB,UAAU,CAACO,EAAIC,EAAMC,IAChDW,KAAK,CAAC,AAACC,GAAe,cAAa,CAAEC,MAAO,oBAAqBC,QAAS,uBAA8BF,EAAME,OAAO,AAAC,IAEnI,EAEA,MAAevB,C"}