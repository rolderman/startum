# Параметры подключения к консоли Kuzzle
1. Консоль: https://console.kuzzle.io
2. Название проекта startum-d2 (s2,p2 соответсвенно)
3. Хост: startum.kuzzle.d2.rolder.app
4. Порт: 80, SSL включен
5. Версия: 2.x

# Changelog
## 2023-09-21 v0.9.0
### Новые функции:
* Экран управления подписками. Таблица с компаниями и состоянием подписки. Можно увидеть список пополнения баланса для каждой компании.
* Пополнение баланса. При добавлении баланса система фиксирует запись о пополнении и пересчитывает текующую подписку, добавляя баланс, рассчитывая дату окончания подписки.
* Автосписание с баланса. Каждый раз при запросе к компании ее подписка пересчитывает баланс и дату окончания на основе справочника цены за сотрудника и зону в день. Если оставшихся дней с текущим тарифом больше 7, то статус "Активна", если меньше или равно 7, то "Заканчивается", если 0, то "Закончилась".
* Справjчник цены. В базе заведен справоxник с ценой в день за сотрудника и зону.
* Создание компании. При создании компании заводится подписка без баланса и даты окончания, со статусом "Ждет регистрации". Баланс такой подписки можно пополнять, но он не будет списываться пока тариф для подписки не будет выбран.
* Экспорт подписок в Эксель.
### Доработки:
* Улучшено поведение проверки вводимых данных в формах у админа системы.
* Обновлен бекенд Kuzzle 2.25.0 > 2.26.2
* Обработчики в бекенде (расчет статуса заданий, расчет баланса и даты окончания подписки) теперь работают асинхронно. В результате время запроса заданий и подписок упало с 300мс до 150мс.
### Исправленные баги:
* Поправлен формат даты в подписках.

## 2023-09-14 v0.8.1
### Исправленные баги:
* При активации менеджера УК не устанавливался пароль.
* Мелкие правки на экране компаний.

## 2023-09-11 v0.8.0
### Новые функции:
* Экран управления компаниями. Возможность создавать и редактировать компанию. При создании компании автоматически создается ее менеджер и случайный пароль. Пароль устанавливается на заданный при активации компании. Менеджера так же можно редактировать, меняя пароль или логин.
### Доработки:
* Введенный логин теперь запоминается.
* Более удобные фильтры в таблицах. Первый пример на экране управления компаниями.
### Исправленные баги:
* Приложение не всегда загружается после обновления версии. Добавлена функция перезагрузки приложения, если версия в браузере отличается.
* Не всегда срабатывало автоматическое выставление статуса уборки на "Провалена".
* В некоторых случаях можно было создать исполнителя с одинаковым логином.

## 2023-08-14 v0.7.0
### Новые функции:
* Автоматическое выставление статуса уборки "Провалена", если плановое время начала больше планового времени завершения.
### Исправленные баги:
* Можно было назначать уборки на прошлое.

## 2023-08-14 v0.6.1
### Доработки:
* Удаление фотографий при завершении уборки. Добавлено ограничение в 8 фотографий и соответсвующее предупреждение.
### Исправленные баги:
* При сбросе фильтров в мобильной версии не сбрасывался диапазон дат и количество выбранных фильтров.
* Не корректный размер видео при фотографировании или сканировании QR.
* Не отображались данные о ЖК и объекте при первой загрузке в мобильной версии.
* Счетчик фотографий показывал всегда 1.
* Не верно считалось время уборки.

## 2023-08-08 v0.6.0
### Новые функции:
* Архивация. Теперь можно удалять не только уборки, но и ЖК, объекты, зоны, результаты и учетные записи исполнителей. Удаленные сущности фактически не удаляются, т.к. нужны в отчетах. Они становятся архивными и исчезают со всех экранов. Для каждого удаления добавлено сообщение, поясняющее что именно будет удалено.
* Фильтры и поиск в мобильной версии.
### Доработки:
* Добавлена возможность не только редактировать зоны у объекта, но добавлять новые.
### Исправленные баги:
* Поправлена редкая ошибка авторизации.
* Ошибка при редактировании даты начала уборки.
* Система позволяла создавать учетные записи с одинаковыми логинами.
#### Рефакторинг всего, что было наработано в этом этапе.

## 2023-08-04 v0.5.0
### Новые функции:
* Просмотр результатов теперь доступен со всех экранов, где можно открыть карточку уборки: экраны планирования, состояния и отчетов.
* В карточке задания добавленны данные о фактических дате начала, длительности и разницы план/факт.
* Добавлена возможность редактировать зоны.

### Доработки:
* Отображение длительности приведено к единому формату.
* Выбор периода в отчете "Эффективность исполнителей" стал более нагляден.

### Исправленные баги:
* Не показывались результаты при редактировании уборки.
* При создании уборки не сворачивалось окно.
* Модуль отображения фотографий результатов работал криво на большом экране.
* В некоторых случаях просмотр фотографий открывалься, где не должен.
* В некоторых случаях данные не обновлялись автоматически после изменений.
* На экране "Состояние" в загруженности персонала не отображался круг вокруг значения в ячейках.
* В некоторых случаях не работал поиск.
* Если выбрать "Месяц" в состоянии работ, показывались данные текущего месяца вместо последних 30 дней.
* Не всегда верно создавались и редактировались учетные записи исполнителей.

## 2023-07-28 v0.4.0
### Новые функции:
* Экран отчетов. Отчет "Эффективность исполнителей". Карточка просмотра уборок из отчета.

## 2023-07-28 v0.3.0
### Новые функции:
* Экран справочника "Исполнители". Можно создавать учетные записи исполнителей, редактировать их. Сразу после создания, учетной записью можно пользоваться. Поиск по имени или фамилии исполнителя.
* Экран справочника "Результаты". Можно создавать и редактировать результаты. Поиск по названию или описанию результата.